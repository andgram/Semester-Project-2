import"./main-DxMEcUNX.js";import{r as u}from"./readAuction-DM6NZyQF.js";import{A as d,d as l}from"./headers-es2B9U5o.js";async function m(n){try{const e=await fetch(`${d}/?q=${encodeURIComponent(n)}`),t=await e.json();if(!e.ok)throw new Error(t.errors?.[0]?.message||"Failed to fetch search results");return t.data}catch(e){return console.error(e),[]}}function h(n,e){if(e.length===0){n.innerHTML='<div id="message">No auctions to show</div>';return}n.innerHTML="";const t=e.map(r=>p(r));n.append(...t)}function p(n){const{id:e,title:t,media:r}=n,s=document.createElement("a");s.classList.add("auction-item"),s.href=`/auction/details/?id=${e}`;const c=document.createElement("h3");c.innerText=t;const o=document.createElement("img");if(o.classList.add("auction-item-image"),Array.isArray(r)&&r.length>0){const i=r[0];o.src=i.url,o.alt=i.alt||`${t} image`}else o.src="/assets/placeholder.jpg",o.alt="Placeholder image";return s.appendChild(o),s.appendChild(c),s}async function a(n,e){const t=document.querySelector(n);!e||e.length===0?t.innerHTML="<p>No auctions to display.</p>":(t.innerHTML="",h(t,e))}function f(n,e,t){const r=document.querySelector(n),s=document.querySelector(e);r&&r.addEventListener("click",t),s&&s.addEventListener("keypress",c=>{c.key==="Enter"&&t(c)})}function y(n,e){console.error(e),l(n,"error",e.message)}const A=await u(),g=A.data;function E(n,e){const r=n.sort((s,c)=>new Date(c.created)-new Date(s.created)).slice(0,e);a("#auctionList",r)}async function L(n){n.preventDefault();const e=document.querySelector("#searchInput").value.trim();if(!e){a("#searchResults",[]);return}try{const t=await m(e);a("#searchResults",t)}catch(t){y("#searchResults",t)}}function w(){E(g,12),f("#searchButton","#searchInput",L)}w();
