import"./main-DxMEcUNX.js";import{a as u,h as l,d as c}from"./headers-es2B9U5o.js";import{a as p}from"./authGuard-C2GFzsuy.js";async function f({title:r,description:e,media:i,endsAt:n}){const o=JSON.stringify({title:r,description:e,media:i,endsAt:n}),s=await fetch(`${u}`,{method:"POST",body:o,headers:l()}),a=await s.json();if(s.ok===!1)throw new Error(a.errors[0].message);return a}async function g(r){r.preventDefault();const e=r.target,i=new FormData(e),n=Object.fromEntries(i.entries()),o=n.title.trim(),s=n.description?.trim()||"",a=new Date(n.endsAt).toISOString(),d=document.querySelectorAll("#mediaInputs input[name='media']"),m=Array.from(d).map(t=>t.value.trim()).filter(t=>t).map(t=>({url:t,alt:"Auction media"}));if(!o||!a){c("#message","error","Title and End Date are required.");return}try{await f({title:o,description:s,media:m,endsAt:a}),c("#message","success","Auction created successfully."),e.reset(),setTimeout(()=>{window.location.href="/profile/"},2e3)}catch(t){c("#message","error",t.message)}}function y(){const r=document.querySelector("#mediaInputs"),e=document.createElement("input");e.type="url",e.name="media",e.className="w-full px-4 py-2 border border-neutral-700 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 bg-neutral-700 text-neutral-100",e.placeholder="https://example.com/image.jpg",r.appendChild(e)}p();const h=document.forms.createAuction;h.addEventListener("submit",g);const w=document.querySelector("#addMedia");w.addEventListener("click",y);
